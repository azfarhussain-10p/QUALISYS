# Custom Error Pages ConfigMap
# Story: 0-13 Load Balancer & Ingress Configuration
# AC: 9 - Custom error pages configured (502, 503, 504)
#
# These pages are served by the nginx-errors default backend when
# upstream services return 502, 503, or 504 errors.
#
# Apply:
#   kubectl apply -f infrastructure/kubernetes/ingress-nginx/custom-error-pages.yaml
#
# The NGINX Ingress Controller values.yaml configures:
#   controller.config.custom-http-errors: "502,503,504"
#   controller.extraArgs.default-backend-service: ingress-nginx/nginx-errors

apiVersion: v1
kind: ConfigMap
metadata:
  name: custom-error-pages
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/part-of: qualisys
data:
  "502": |
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>QUALISYS - Bad Gateway</title>
      <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          background: #f8fafc;
          color: #334155;
          display: flex;
          align-items: center;
          justify-content: center;
          min-height: 100vh;
          text-align: center;
          padding: 2rem;
        }
        .container { max-width: 480px; }
        .status { font-size: 4rem; font-weight: 700; color: #3b82f6; margin-bottom: 1rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.75rem; color: #1e293b; }
        p { font-size: 1rem; line-height: 1.6; margin-bottom: 1.5rem; }
        .brand { font-weight: 600; color: #3b82f6; }
        a { color: #3b82f6; text-decoration: none; }
        a:hover { text-decoration: underline; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="status">502</div>
        <h1>Bad Gateway</h1>
        <p>
          <span class="brand">QUALISYS</span> is temporarily unable to connect to the
          upstream service. We're working on it.
        </p>
        <p>Please try again in a few minutes or <a href="https://status.qualisys.io">check system status</a>.</p>
      </div>
    </body>
    </html>
  "503": |
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>QUALISYS - Service Unavailable</title>
      <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          background: #f8fafc;
          color: #334155;
          display: flex;
          align-items: center;
          justify-content: center;
          min-height: 100vh;
          text-align: center;
          padding: 2rem;
        }
        .container { max-width: 480px; }
        .status { font-size: 4rem; font-weight: 700; color: #f59e0b; margin-bottom: 1rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.75rem; color: #1e293b; }
        p { font-size: 1rem; line-height: 1.6; margin-bottom: 1.5rem; }
        .brand { font-weight: 600; color: #3b82f6; }
        a { color: #3b82f6; text-decoration: none; }
        a:hover { text-decoration: underline; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="status">503</div>
        <h1>Service Unavailable</h1>
        <p>
          <span class="brand">QUALISYS</span> is undergoing scheduled maintenance
          or experiencing high traffic. The service will be back shortly.
        </p>
        <p>Please try again in a few minutes or <a href="https://status.qualisys.io">check system status</a>.</p>
      </div>
    </body>
    </html>
  "504": |
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>QUALISYS - Gateway Timeout</title>
      <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          background: #f8fafc;
          color: #334155;
          display: flex;
          align-items: center;
          justify-content: center;
          min-height: 100vh;
          text-align: center;
          padding: 2rem;
        }
        .container { max-width: 480px; }
        .status { font-size: 4rem; font-weight: 700; color: #ef4444; margin-bottom: 1rem; }
        h1 { font-size: 1.5rem; margin-bottom: 0.75rem; color: #1e293b; }
        p { font-size: 1rem; line-height: 1.6; margin-bottom: 1.5rem; }
        .brand { font-weight: 600; color: #3b82f6; }
        a { color: #3b82f6; text-decoration: none; }
        a:hover { text-decoration: underline; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="status">504</div>
        <h1>Gateway Timeout</h1>
        <p>
          The <span class="brand">QUALISYS</span> service took too long to respond.
          This may be due to a complex operation or temporary overload.
        </p>
        <p>Please try again or <a href="https://status.qualisys.io">check system status</a>.</p>
      </div>
    </body>
    </html>
