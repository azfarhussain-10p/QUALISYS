# ExternalSecrets Operator Helm Values
# Story: 0-7 Secret Management
# AC: 8 - ExternalSecrets Operator installed and configured
#
# Install:
#   helm repo add external-secrets https://charts.external-secrets.io
#   helm install external-secrets external-secrets/external-secrets \
#     -n external-secrets --create-namespace \
#     -f kubernetes/external-secrets/values.yaml

replicaCount: 2

serviceAccount:
  create: true
  name: external-secrets-sa
  annotations:
    # IRSA annotation â€” replace <ACCOUNT_ID> with your AWS account ID
    eks.amazonaws.com/role-arn: "arn:aws:iam::<ACCOUNT_ID>:role/qualisys-external-secrets"

# Webhook for validation of ExternalSecret resources
webhook:
  replicaCount: 2

# Cert controller for webhook TLS
certController:
  replicaCount: 1

# Resource limits
resources:
  requests:
    cpu: 50m
    memory: 128Mi
  limits:
    cpu: 200m
    memory: 256Mi

# Pod security context (compatible with PSS restricted)
securityContext:
  runAsNonRoot: true
  runAsUser: 65534
  fsGroup: 65534

# Tolerations (run on general nodes)
tolerations: []

# Node selector
nodeSelector:
  node-type: general

# Priority class for reliability
priorityClassName: system-cluster-critical
