# ClusterSecretStore — Azure Key Vault
# QUALISYS Azure Infrastructure — mirrors AWS Secrets Manager ClusterSecretStore
# Uses Workload Identity for authentication
#
# IMPORTANT: Replace <KEY_VAULT_URI> with Terraform output:
#   terraform output -raw key_vault_uri
#
# Apply after installing ExternalSecrets Operator:
#   kubectl apply -f azure/cluster-secret-store.yaml

apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: azure-keyvault
spec:
  provider:
    azurekv:
      authType: WorkloadIdentity
      vaultUrl: "<KEY_VAULT_URI>"
      serviceAccountRef:
        name: external-secrets-sa
        namespace: external-secrets
