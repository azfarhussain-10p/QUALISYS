# ClusterSecretStore â€” Azure Key Vault
# Story: 0-22 Third-Party Service Accounts & API Keys
# AC: 12 - ExternalSecrets configuration for Kubernetes access
#
# Provides cluster-wide access to Azure Key Vault.
# Uses Workload Identity federation from azure/modules/secrets/.
---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: azure-key-vault
  labels:
    app.kubernetes.io/part-of: qualisys
spec:
  provider:
    azurekv:
      authType: WorkloadIdentity
      vaultUrl: "${KEY_VAULT_URI}"
      serviceAccountRef:
        name: external-secrets-sa
        namespace: external-secrets
