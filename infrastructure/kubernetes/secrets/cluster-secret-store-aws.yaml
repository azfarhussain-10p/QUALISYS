# ClusterSecretStore â€” AWS Secrets Manager
# Story: 0-22 Third-Party Service Accounts & API Keys
# AC: 12 - ExternalSecrets configuration for Kubernetes access
#
# Provides cluster-wide access to AWS Secrets Manager.
# Uses IRSA (IAM Roles for Service Accounts) from Story 0-7.
---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: aws-secrets-manager
  labels:
    app.kubernetes.io/part-of: qualisys
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-east-1
      auth:
        jwt:
          serviceAccountRef:
            name: external-secrets-sa
            namespace: external-secrets
